<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Scraping infinite websites for quotes</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>


    <!-- Font Awesome -->
    <!-- <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> -->

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Memorias de un Informático" />
    <link rel="shortcut icon" href="/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="/Scraping-infinite-websites" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="memoriasIT" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Scraping infinite websites for quotes" />
    <meta property="og:description" content="Introduction Lately, as a module of a big project I'm working on, I wanted to get some quotes. My goal at first was to use whatever API available for free. There was one, which worked, but it only provided a few requests per hour. As I needed something beefier, I" />
    <meta property="og:url" content="/Scraping-infinite-websites" />
    <meta property="og:image" content="/assets/images/cloudcomputing.jpg" />
    <meta property="article:publisher" content="https://www.github.com/memoriasIT" />
    <meta property="article:author" content="https://www.github.com/memoriasIT" />
    <meta property="article:published_time" content="2018-10-28T09:00:00+01:00" />
    <meta property="article:modified_time" content="2018-10-28T09:00:00+01:00" />
    <meta property="article:tag" content="Remote" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Scraping infinite websites for quotes" />
    <meta name="twitter:description" content="Introduction Lately, as a module of a big project I'm working on, I wanted to get some quotes. My goal at first was to use whatever API available for free. There was one, which worked, but it only provided a few requests per hour. As I needed something beefier, I" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/assets/images/cloudcomputing.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="memoriasIT" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Remote" />
    <meta name="twitter:site" content="@memoriasIT" />
    <meta name="twitter:creator" content="@memoriasIT" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "memoriasIT",
        "logo": "/assets/images/blog-icon.png"
    },
    "url": "/Scraping-infinite-websites",
    "image": {
        "@type": "ImageObject",
        "url": "/assets/images/cloudcomputing.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/Scraping-infinite-websites"
    },
    "description": "Introduction Lately, as a module of a big project I'm working on, I wanted to get some quotes. My goal at first was to use whatever API available for free. There was one, which worked, but it only provided a few requests per hour. As I needed something beefier, I"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Scraping infinite websites for quotes" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/"><img src="/assets/images/blog-icon.png" height="150px" alt="memoriasIT" /></a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/project/">Projects</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/course/">Courses</a></li>
    <li class="nav-try-ghost" role="menuitem"><a href="http://africau.edu/images/default/sample.pdf">CV</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link" href="https://github.com/memoriasIT"><img src="https://i.imgur.com/f2POCJJ.png" height="23px" alt="" srcset=""></a>
            
            
                <a class="social-link social-link-tw" href="https://twitter.com/memoriasIT" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="28 October 2018">28 October 2018</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/remote/'>REMOTE</a>,
                            
                        
                            
                               <a href='/tag/programming/'>PROGRAMMING</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Scraping infinite websites for quotes</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/cloudcomputing.jpg)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h2>Introduction</h2>

<p>
    Lately, as a module of a big project I'm working on, I wanted to get some <b>quotes</b>.
My goal at first was to use whatever <b>API</b> available for free.
</p>

<p>
    There was one, which worked, but it only provided a few requests per hour.
As I needed something beefier, I started my hunt.
</p>

<p>
    <b>Github</b> is usually my first go-to for projects like these. 
It is easy to find other people who wanted to achieve the same as you and already thought about it.
</p>

<p>
    There were several unofficial API's for famous websites, but, I tried some of them and they did not work.
My guess is that they changed their design.
</p>

<p>I decided to contribute to the most famous project and fix it. <br>
    And that's how I met this <b>pull request</b>.
    </p>

<h2>Scraping</h2>


<p>I'm not going to lie. Scrappers are usually the kind of projects I do from time to time to boost my confidence because they are just too easy and yet fun.
   <br> For me it's always the same, python with the plugins: <code>requests</code>, <code>beautiful soup 4</code> and with that manage to parse what I want.
    In order to achieve that I sometimes need other additional plugins like <code>json</code> or <code>regex</code>.
    </p>

<p>First of all, you need to get the raw data, that's why you use <b>requests</b>.
    Also, create a beautiful soup <b>parser</b>, that we will use to search in the html code.
    </p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">category_url</span> <span class="o">=</span> <span class="s">'http://www.brainyquote.com/quotes/topics.html'</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">category_url</span><span class="p">)</span> 
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s">"html.parser"</span><span class="p">)</span> </code></pre></figure>

<p>Now that you have the raw data you just have to parser. In this case I just used <code>soup.find()</code> and <code>soup.find_all()</code></p>
<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">category</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">,{</span><span class="s">"href"</span> <span class="p">:</span> <span class="s">"whatever"</span><span class="p">})</span> 
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">find</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">"div"</span><span class="p">,</span> <span class="p">{</span><span class="s">"id"</span><span class="p">:</span> <span class="n">divID</span><span class="p">})</span></code></pre></figure>

<h2>Infinite Scroll Websites</h2>
<p>However, content is not always static. It might change with certain events, for example, user scroll.
    Infinite scroll websites are becomming a trend lately. They allow users to consume content non-stop.</p>


<p>For us, who just want to automate the <dfn>"consumption"</dfn> of the content, this will just mean a pain in the ass.
    There are two main alternatives that I came accross.
    </p>

<p>The first one is to recreate the user movements.
    We can use a python module called <code>Selenium</code>. The idea is to execute the scrolling down until you have enough data and then parse it.
    Unfortunately, this is not the method that I ended up using, as the second one can be easier if achievable.</p>

<p>The second one, is just finding <dfn>"pages"</dfn>. Most of the times, even if the website has infinite scroll, pages are still implemented.
    If we manage to find the URL for the pages we can do it the old-school way.</p>

<p>For this, the web developers consoles are very helpful. Try to find calls to .js, buttons and hidden links.</p>

<p>In the scenario I was, the pages where given by the url:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c"># x is a number from 1 to n</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"http://www.brainyquote.com/quotes/topics/"</span> <span class="o">+</span> <span class="n">category</span> <span class="o">+</span> <span class="s">"_"</span> <span class="o">+</span> <span class="n">x</span></code></pre></figure>

<p>
Inside the page, divs were created with a numeration 1 to 23. <br>
Therefore all I had to do was generate the combination:
</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c"># 1_1, 1_2, 1_.., 1_23, 2_1</span>
<span class="c"># x and y form the divID, n is the number of quotes generated</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="n">numberOfQuotes</span><span class="p">):</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">%</span> <span class="mi">26</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>    <span class="c"># List starts at 1</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>        <span class="c"># New Page must be loaded</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c"># We can get each page individually with "%category%_[1..]"</span>
        <span class="n">getTheCorrespondingPage</span><span class="p">()</span>
    
    <span class="n">parseDataAndAppend</span><span class="p">()</span>

    <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span></code></pre></figure>
<p>
I removed some parts of the code above to make it simpler to understand. <br>
We basically use the modulus operator for the circular counter and then we get the data from the page. <br>
Inside the page we parse the data and append it to a list.  
</p>

<h2>Learn More</h2>
<p>
If you are interested in seeing the code, you can find it in my github, and maybe, if the user of the original repo has accepted my pull request in his own repo.
</p>

<p>
My repository: <br>
His repository (check for recent updates!): 
</p>

                </div>
            </section>

            Email subscribe form at the bottom of the page
            

            <!-- <footer class="post-full-footer"> -->
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/memoriasIT.png" alt="memoriasIT" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/memoriasIT">memoriasIT</a></h4>
                                
                                    <p>Señor extremadamente creativo ahoga sus penas en lineas de código y tazas de café.</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/memoriasIT">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            <!-- </footer> -->

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; memoriasIT &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/remote/">Remote</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/RaspberryPiBarebones">RaspberryPi Barebones</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/Remote-programming">Remote programming setup</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/Proximity-Cards">proximity cards</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/remote/">
                                
                                    See all 3 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Remote-programming">
                <div class="post-card-image" style="background-image: url(/assets/images/cloudcomputing.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Remote-programming">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Remote</span>
                            
                        
                            
                                <span class="post-card-tags">Programming</span>
                            
                        
                    

                    <h2 class="post-card-title">Remote programming setup</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>remote vim setup + server running scripts
bots for instagram, twitter, etc.
also running astral parser from time to time</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/memoriasIT.png" alt="memoriasIT" />
                        
                        <span class="post-card-author">
                            <a href="/author/memoriasIT/">memoriasIT</a>
                        </span>
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/Proximity-Cards">
                <div class="post-card-image" style="background-image: url(/assets/images/cloudcomputing.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/Proximity-Cards">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Remote</span>
                            
                        
                            
                                <span class="post-card-tags">Programming</span>
                            
                        
                    

                    <h2 class="post-card-title">proximity cards</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>https://greysec.net/showthread.php?tid=2931&pid=10663#pid10663</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/memoriasIT.png" alt="memoriasIT" />
                        
                        <span class="post-card-author">
                            <a href="/author/memoriasIT/">memoriasIT</a>
                        </span>
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
                <img src="/assets/images/favicon.png" height="70px" alt="memoriasIT icon" />
            
            <span>memoriasIT</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Scraping infinite websites for quotes</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Scraping+infinite+websites+for+quotes&amp;url=https://memoriasit.github.io//Scraping-infinite-websites"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://memoriasit.github.io//Scraping-infinite-websites"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
        
        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>



<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">memoriasIT</a> &copy; 2019</section>
                
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    <a href="https://twitter.com/memoriasIT" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://github.com/memoriasIT" target="_blank" rel="noopener">Github</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69281367-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
